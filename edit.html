<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Data Manager Premium</title>
  <style>
    * {margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI',sans-serif;}
    body {
      min-height:100vh; display:flex; flex-direction:column;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color:#fff; transition:0.3s;
    }

    /* Navbar */
    nav {
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(15px);
      padding:15px 25px; display:flex; justify-content:space-between; align-items:center;
      box-shadow:0 5px 20px rgba(0,0,0,0.2);
    }
    nav h2 { font-size:22px; letter-spacing:1px; }
    nav button { 
      background:transparent; border:none; color:#fff; cursor:pointer;
      font-size:18px; transition:0.3s;
    }
    nav button:hover { transform:scale(1.2); }

    /* Container utama */
    .container {
      width:95%; max-width:1100px; margin:25px auto; padding:20px;
    }

    /* Cards statistik */
    .cards {
      display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
      gap:15px; margin-bottom:20px;
    }
    .card {
      background:rgba(255,255,255,0.15); padding:20px; border-radius:15px;
      text-align:center; backdrop-filter: blur(10px);
      box-shadow:0 6px 20px rgba(0,0,0,0.25);
      transition:0.3s;
    }
    .card:hover { transform:translateY(-5px) scale(1.02); }

    /* Tombol */
    .btn {
      padding:8px 14px; border:none; border-radius:8px; cursor:pointer;
      font-size:13px; margin:2px; transition:0.3s; font-weight:600;
    }
    .btn-add { background:#28a745; color:#fff; }
    .btn-edit { background:#ffc107; color:#222; }
    .btn-delete { background:#dc3545; color:#fff; }
    .btn-cancel { background:#6c757d; color:#fff; }

    .btn:hover { transform:scale(1.05); box-shadow:0 4px 12px rgba(0,0,0,0.3); }

    /* Tabel */
    table { width:100%; border-collapse:collapse; margin-top:15px; }
    table thead { background:rgba(255,255,255,0.2); cursor:pointer; }
    table th, table td { padding:12px; text-align:center; }
    table tr { transition:0.25s; }
    table tr:hover { background:rgba(255,255,255,0.1); transform:scale(1.005); }

    /* Modal */
    .modal {
      position:fixed; top:0; left:0; width:100%; height:100%;
      background:rgba(0,0,0,0.6); display:none; justify-content:center; align-items:center;
    }
    .modal-content {
      background:rgba(255,255,255,0.9); color:#333; padding:25px; border-radius:15px;
      width:90%; max-width:420px; animation:slideDown 0.5s ease;
    }
    .modal-content h2 { margin-bottom:10px; text-align:center; }
    .modal-content input {
      width:100%; padding:12px; margin:8px 0;
      border:1px solid #ccc; border-radius:8px; outline:none;
    }
    .modal-actions { display:flex; justify-content:space-between; margin-top:15px; }

    /* Dark mode */
    body.dark { background:linear-gradient(135deg,#232526,#414345); color:#eee; }
    body.dark nav { background:rgba(0,0,0,0.4); }
    body.dark .card { background:rgba(255,255,255,0.05); }
    body.dark table thead { background:rgba(0,0,0,0.5); }
    body.dark .modal-content { background:#2c2c2c; color:#eee; }

    /* Animasi */
    @keyframes slideDown { from{transform:translateY(-50px); opacity:0;} to{transform:translateY(0); opacity:1;} }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav>
    <h2>‚ö° Data Manager Premium</h2>
    <button onclick="toggleMode()">üåô</button>
  </nav>

  <div class="container">
    <!-- Cards statistik -->
    <div class="cards">
      <div class="card" id="cardTotal">Total Data: 0</div>
      <div class="card" id="cardUmur">Rata-rata Umur: 0</div>
    </div>

    <!-- Tombol tambah -->
    <button class="btn btn-add" onclick="openModal()">+ Tambah Data</button>

    <!-- Tabel data -->
    <table id="dataTable">
      <thead>
        <tr>
          <th onclick="sortTable(0)">Nama ‚¨ç</th>
          <th onclick="sortTable(1)">Asal ‚¨ç</th>
          <th onclick="sortTable(2)">Umur ‚¨ç</th>
          <th>Aksi</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="modal-content">
      <h2 id="modalTitle">Tambah Data</h2>
      <input type="text" id="nama" placeholder="Nama">
      <input type="text" id="asal" placeholder="Asal">
      <input type="number" id="umur" placeholder="Umur">
      <div class="modal-actions">
        <button class="btn btn-cancel" onclick="closeModal()">Batal</button>
        <button class="btn btn-add" onclick="saveData()">Simpan</button>
      </div>
    </div>
  </div>

  <script>
    let editIndex=null;

    function toggleMode(){ document.body.classList.toggle("dark"); }

    function openModal(index=null){
      document.getElementById("modal").style.display="flex";
      if(index!==null){
        editIndex=index;
        const row=document.querySelectorAll("#dataTable tbody tr")[index].children;
        document.getElementById("nama").value=row[0].textContent;
        document.getElementById("asal").value=row[1].textContent;
        document.getElementById("umur").value=row[2].textContent;
        document.getElementById("modalTitle").textContent="Edit Data";
      } else {
        editIndex=null;
        document.getElementById("nama").value="";
        document.getElementById("asal").value="";
        document.getElementById("umur").value="";
        document.getElementById("modalTitle").textContent="Tambah Data";
      }
    }

    function closeModal(){ document.getElementById("modal").style.display="none"; }

    function saveData(){
      const nama=document.getElementById("nama").value.trim();
      const asal=document.getElementById("asal").value.trim();
      const umur=document.getElementById("umur").value.trim();

      if(!nama||!asal||!umur){alert("Isi semua data!"); return;}
      const tbody=document.querySelector("#dataTable tbody");

      if(editIndex!==null){
        const row=tbody.children[editIndex].children;
        row[0].textContent=nama;
        row[1].textContent=asal;
        row[2].textContent=umur;
      } else {
        const tr=document.createElement("tr");
        tr.innerHTML=`
          <td>${nama}</td>
          <td>${asal}</td>
          <td>${umur}</td>
          <td>
            <button class="btn btn-edit" onclick="openModal(${tbody.children.length})">Edit</button>
            <button class="btn btn-delete" onclick="deleteData(this)">Hapus</button>
          </td>
        `;
        tbody.appendChild(tr);
      }
      updateCards();
      closeModal();
    }

    function deleteData(btn){
      btn.parentElement.parentElement.remove();
      updateCards();
    }

    function updateCards(){
      const rows=document.querySelectorAll("#dataTable tbody tr");
      document.getElementById("cardTotal").textContent="Total Data: "+rows.length;

      if(rows.length>0){
        let totalUmur=0;
        rows.forEach(r=> totalUmur+=parseInt(r.children[2].textContent));
        document.getElementById("cardUmur").textContent="Rata-rata Umur: "+Math.round(totalUmur/rows.length);
      } else {
        document.getElementById("cardUmur").textContent="Rata-rata Umur: 0";
      }
    }

    function sortTable(col){
      const tbody=document.querySelector("#dataTable tbody");
      const rows=Array.from(tbody.querySelectorAll("tr"));
      const sorted=rows.sort((a,b)=>{
        let valA=a.children[col].textContent.toLowerCase();
        let valB=b.children[col].textContent.toLowerCase();
        return col===2? parseInt(valA)-parseInt(valB) : valA.localeCompare(valB);
      });
      tbody.innerHTML="";
      sorted.forEach(r=>tbody.appendChild(r));
    }
  </script>
</body>
</html>
